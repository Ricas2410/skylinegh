{% extends 'dashboard/base.html' %}
{% block title %}Users{% endblock %}
{% block page_title %}Users{% endblock %}
{% block content %}
<div class="mb-6 flex items-center justify-between">
  <form method="get" class="flex items-center space-x-3">
    <input type="text" name="search" value="{{ request.GET.search }}" placeholder="Search users..." class="px-4 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
    <button class="btn-secondary">Search</button>
  </form>
</div>

<div class="bg-white rounded-2xl border border-slate-200 overflow-hidden">
  <table class="min-w-full divide-y divide-slate-200">
    <thead class="bg-slate-50">
      <tr>
        <th class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase">Username</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase">Name</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase">Email</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase">Joined</th>
        <th class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase">Staff</th>
        <th class="px-4 py-3"></th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-200">
      {% for u in users %}
      <tr class="hover:bg-slate-50">
        <td class="px-4 py-3 font-semibold text-slate-800">{{ u.username }}</td>
        <td class="px-4 py-3 text-slate-700">{{ u.get_full_name|default:'-' }}</td>
        <td class="px-4 py-3 text-slate-700">{{ u.email|default:'-' }}</td>
        <td class="px-4 py-3 text-slate-700">{{ u.date_joined|date:'M j, Y, g:i a' }}</td>
        <td class="px-4 py-3">{% if u.is_staff %}<span class="text-green-600 font-medium">Yes</span>{% else %}<span class="text-slate-500">No</span>{% endif %}</td>
        <td class="px-4 py-3 text-right text-sm text-slate-500">Read-only</td>
      </tr>
      {% empty %}
      <tr>
        <td class="px-4 py-6 text-center text-slate-500" colspan="6">No users found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% if is_paginated %}
<div class="flex justify-between items-center mt-6 text-sm">
  <div class="text-slate-600">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</div>
  <div class="space-x-2">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}" class="btn-secondary">Previous</a>
    {% endif %}
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="btn-secondary">Next</a>
    {% endif %}
  </div>
</div>
{% endif %}
{% endblock %}
