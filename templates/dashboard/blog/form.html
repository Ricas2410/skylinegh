{% extends 'dashboard/base.html' %}
{% block title %}{% if object %}Edit Post{% else %}New Post{% endif %}{% endblock %}
{% block page_title %}{% if object %}Edit Blog Post{% else %}New Blog Post{% endif %}{% endblock %}
{% block content %}
<form method="post" enctype="multipart/form-data" class="bg-white rounded-2xl p-6 border border-slate-200">
  {% csrf_token %}
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-slate-700 mb-1">Title</label>
      {{ form.title }}
    </div>
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-slate-700 mb-1">Excerpt</label>
      {{ form.excerpt }}
    </div>
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-slate-700 mb-1">Content</label>
      {{ form.content }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Author</label>
      {{ form.author }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Status</label>
      {{ form.status }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Category</label>
      {{ form.category }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Tags</label>
      {{ form.tags }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Featured Image</label>
      {{ form.featured_image }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Image Alt</label>
      {{ form.featured_image_alt }}
    </div>
    <div>
      <label class="inline-flex items-center space-x-2">
        {{ form.is_featured }}
        <span class="text-slate-700">Feature on homepage</span>
      </label>
    </div>
    <div>
      <label class="inline-flex items-center space-x-2">
        {{ form.allow_comments }}
        <span class="text-slate-700">Allow comments</span>
      </label>
    </div>
  </div>
  <div class="mt-6 flex items-center space-x-3">
    <button class="btn-primary" type="submit">Save</button>
    <a href="{% url 'dashboard:blog_list' %}" class="btn-secondary">Cancel</a>
  </div>
</form>
{% endblock %}
{% block extra_js %}
<script>
  (function() {
    const textInputs = document.querySelectorAll('input[type="text"], input[type="number"], textarea');
    textInputs.forEach(el => {
      el.classList.add('w-full','px-4','py-2.5','border','border-slate-300','rounded-lg','focus:outline-none','focus:ring-2','focus:ring-indigo-500','focus:border-indigo-500');
      if (el.tagName.toLowerCase() === 'textarea') {
        el.rows = 8;
      }
    });
    const selects = document.querySelectorAll('select');
    selects.forEach(el => el.classList.add('w-full','px-4','py-2.5','border','border-slate-300','rounded-lg','focus:outline-none','focus:ring-2','focus:ring-indigo-500','focus:border-indigo-500'));
  })();
</script>
{% endblock %}
