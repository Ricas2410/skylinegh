{% extends 'base.html' %}
{% load static %}

{% block title %}{{ category.name }} | Services | {{ site_settings.site_name }}{% endblock %}

{% block content %}
<!-- Category Hero -->
<section class="relative py-24 lg:py-32 overflow-hidden">
    <!-- Hero Background Image -->
    {% if category.hero_image %}
        <div class="absolute inset-0">
            <img src="{{ category.hero_image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/80 via-blue-800/70 to-gray-900/80"></div>
        </div>
    {% else %}
        <div class="absolute inset-0">
            <img src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" alt="{{ category.name }}" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/80 via-blue-800/70 to-gray-900/80"></div>
        </div>
    {% endif %}

    <div class="relative container-custom text-center text-white">
        <div class="max-w-4xl mx-auto">
            <!-- Breadcrumb -->
            <nav class="mb-8 animate-fade-in-up">
                <ol class="flex items-center justify-center space-x-2 text-blue-200">
                    <li><a href="{% url 'core:home' %}" class="hover:text-white transition-colors duration-200">Home</a></li>
                    <li><span class="mx-2">/</span></li>
                    <li><a href="{% url 'services:service_list' %}" class="hover:text-white transition-colors duration-200">Services</a></li>
                    <li><span class="mx-2">/</span></li>
                    <li class="text-white">{{ category.name }}</li>
                </ol>
            </nav>

            <h1 class="text-5xl lg:text-6xl font-heading font-bold mb-6 animate-fade-in-up" style="animation-delay: 0.1s;">
                {{ category.name }}
            </h1>
            <p class="text-xl lg:text-2xl text-blue-200 mb-8 max-w-3xl mx-auto animate-fade-in-up" style="animation-delay: 0.2s;">
                {{ category.short_description }}
            </p>
        </div>
    </div>
</section>

<!-- Category Overview -->
<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-20 items-center mb-20">
            <div class="animate-on-scroll">
                <h2 class="text-4xl lg:text-5xl font-heading font-bold text-gray-800 mb-8">
                    Why Choose Our <span class="text-gradient">{{ category.name }}</span>?
                </h2>
                <p class="text-lg text-gray-600 mb-10 leading-relaxed">
                    {{ category.description }}
                </p>

                <!-- Key Benefits -->
                <div class="space-y-4">
                    <div class="flex items-start space-x-4">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Professional Excellence</h4>
                            <p class="text-gray-600">Certified professionals with years of industry experience</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Quality Materials</h4>
                            <p class="text-gray-600">Premium materials sourced from trusted suppliers</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Timely Delivery</h4>
                            <p class="text-gray-600">Projects completed on schedule with quality assurance</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="animate-on-scroll">
                <!-- Image Carousel -->
                <div class="relative rounded-2xl overflow-hidden shadow-2xl">
                    <div class="relative h-96" id="categoryCarousel">
                        <!-- Carousel slides -->
                        <div class="carousel-slides relative w-full h-full">
                            {% if category.banner_image %}
                            <div class="carousel-slide active absolute inset-0 transition-opacity duration-500">
                                <img src="{{ category.banner_image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                                <div class="absolute bottom-6 left-6 text-white">
                                    <h3 class="text-2xl font-bold mb-2">{{ category.name }}</h3>
                                    <p class="text-white/90">Professional {{ category.name|lower }} services</p>
                                </div>
                            </div>
                            {% endif %}

                            <!-- Additional showcase images -->
                            <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0">
                                <img src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Construction work" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                                <div class="absolute bottom-6 left-6 text-white">
                                    <h3 class="text-2xl font-bold mb-2">Quality Construction</h3>
                                    <p class="text-white/90">Excellence in every project</p>
                                </div>
                            </div>

                            <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0">
                                <img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Modern building" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                                <div class="absolute bottom-6 left-6 text-white">
                                    <h3 class="text-2xl font-bold mb-2">Modern Solutions</h3>
                                    <p class="text-white/90">Innovative construction techniques</p>
                                </div>
                            </div>
                        </div>

                        <!-- Carousel controls -->
                        <button class="carousel-prev absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 backdrop-blur-sm text-white p-2 rounded-full hover:bg-white/30 transition-colors duration-200">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <button class="carousel-next absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 backdrop-blur-sm text-white p-2 rounded-full hover:bg-white/30 transition-colors duration-200">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>

                        <!-- Carousel indicators -->
                        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors duration-200 active" data-slide="0"></button>
                            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors duration-200" data-slide="1"></button>
                            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors duration-200" data-slide="2"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services in Category -->
<section class="py-20 bg-gradient-to-br from-gray-50 to-blue-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-20 animate-on-scroll">
            <h2 class="text-4xl lg:text-5xl font-heading font-bold text-gray-800 mb-8">
                Our <span class="text-gradient">Services</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Comprehensive solutions tailored to meet your specific construction needs.
            </p>
        </div>

        {% if category.services.all %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                {% for service in category.services.all %}
                <div class="bg-white card-hover group animate-on-scroll rounded-2xl overflow-hidden shadow-lg">
                    <!-- Service Image -->
                    {% if service.image %}
                    <div class="relative h-48 overflow-hidden">
                        <img src="{{ service.image.url }}" alt="{{ service.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                        <div class="absolute top-4 left-4">
                            <div class="w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    <div class="p-6">
                        {% if not service.image %}
                        <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                            </svg>
                        </div>
                        {% endif %}
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 group-hover:text-primary-600 transition-colors duration-300">
                            {{ service.name }}
                        </h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">{{ service.short_description }}</p>

                        {% if service.starting_price %}
                            <div class="mb-6 p-4 bg-gray-50 rounded-xl">
                                <span class="text-sm text-gray-500 block mb-1">Starting from</span>
                                <div class="text-2xl font-bold text-primary-600">
                                    GHS {{ service.starting_price|floatformat:0 }}
                                    {% if service.price_unit %}
                                        <span class="text-sm text-gray-500 font-normal">{{ service.price_unit }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}

                        <div class="flex space-x-3">
                            <a href="{% url 'services:service_detail' category_slug=category.slug service_slug=service.slug %}"
                               class="flex-1 bg-primary-600 text-white text-center py-3 px-4 rounded-xl font-medium hover:bg-primary-700 transition-colors duration-200">
                                Learn More
                            </a>
                            <a href="{% url 'core:contact' %}"
                               class="flex-1 border border-primary-600 text-primary-600 text-center py-3 px-4 rounded-xl font-medium hover:bg-primary-50 transition-colors duration-200">
                                Get Quote
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-16 animate-on-scroll">
                <div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Services Coming Soon</h3>
                <p class="text-gray-600 mb-8 max-w-md mx-auto">
                    We're updating this service category. Please contact us for more information.
                </p>
                <a href="{% url 'core:contact' %}" class="btn-primary">
                    Contact Us
                </a>
            </div>
        {% endif %}
    </div>
</section>




<!-- Services Gallery -->
{% if category_images or related_projects %}
<section class="section bg-white">
    <div class="container-custom">
        <div class="text-center mb-16 animate-on-scroll">
            <h2 class="text-4xl lg:text-5xl font-heading font-bold text-gray-800 mb-6">
                <span class="text-gradient">Services Gallery</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Explore our {{ category.name|lower }} projects and see the quality we deliver.
            </p>
        </div>

        <!-- Gallery Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            <!-- Category Images (Admin Uploaded) -->
            {% for image in category_images %}
                <div class="group cursor-pointer" onclick="openImageModal('{{ image.image.url }}', '{{ image.title }}', '{{ image.description|default:"" }}', '{{ image.location|default:"" }}', '{{ image.completion_year|default:"" }}', {{ image.is_featured|yesno:"true,false" }})">
                    <div class="relative rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300">
                        <div class="relative h-48">
                            <img src="{{ image.image.url }}"
                                 alt="{{ image.title }}"
                                 class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

                            <!-- Click indicator -->
                            <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="bg-white/20 backdrop-blur-sm rounded-full p-3">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                </div>
                            </div>

                            <div class="absolute bottom-3 left-3 right-3 text-white transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 opacity-0 group-hover:opacity-100">
                                <h3 class="font-semibold mb-1">{{ image.title }}</h3>
                                <p class="text-sm text-white/90">
                                    {% if image.location %}{{ image.location }}{% endif %}
                                    {% if image.location and image.completion_year %} • {% endif %}
                                    {% if image.completion_year %}{{ image.completion_year }}{% endif %}
                                </p>
                            </div>
                            {% if image.is_featured %}
                                <div class="absolute top-3 right-3">
                                    <span class="bg-yellow-500 text-white text-xs px-2 py-1 rounded-full font-medium">
                                        Featured
                                    </span>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}

            <!-- Related Projects from Database -->
            {% for project in related_projects %}
                {% if project.featured_image %}
                    <div class="group">
                        <a href="{% url 'projects:project_detail' project.slug %}" class="block">
                            <div class="relative rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300">
                                <div class="relative h-48">
                                    <img src="{{ project.featured_image.url }}"
                                         alt="{{ project.title }}"
                                         class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                    <div class="absolute bottom-3 left-3 right-3 text-white transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 opacity-0 group-hover:opacity-100">
                                        <h3 class="font-semibold mb-1">{{ project.title }}</h3>
                                        <p class="text-sm text-white/90">
                                            {{ project.location }}
                                            {% if project.completion_date %} • {{ project.completion_date.year }}{% endif %}
                                        </p>
                                    </div>
                                    <div class="absolute top-3 right-3">
                                        <span class="bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium">
                                            Project
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- View All Projects Button -->
        {% if related_projects %}
            <div class="text-center animate-on-scroll">
                <a href="{% url 'projects:project_list' %}?service={{ category.slug }}" class="btn-outline btn-lg">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                    </svg>
                    View All {{ category.name }} Projects
                </a>
            </div>
        {% endif %}
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="section bg-gray-50">
    <div class="container-custom text-center">
        <div class="max-w-3xl mx-auto animate-on-scroll">
            <h2 class="text-4xl lg:text-5xl font-heading font-bold text-gray-800 mb-6">
                Need a Custom Solution?
            </h2>
            <p class="text-xl text-gray-600 mb-8">
                Every project is unique. Let's discuss your specific requirements and create a tailored solution.
            </p>
            <a href="{% url 'core:contact' %}" class="btn-primary btn-lg">
                <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
                Get Free Consultation
            </a>
        </div>
    </div>
</section>

<!-- Image Modal -->
<div id="imageModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl">
        <div class="relative">
            <!-- Close button -->
            <button onclick="closeImageModal()" class="absolute top-4 right-4 z-10 bg-black/20 backdrop-blur-sm text-white rounded-full p-2 hover:bg-black/40 transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <!-- Image -->
            <div class="relative h-96 md:h-[500px]">
                <img id="modalImage" src="" alt="" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
            </div>

            <!-- Content -->
            <div class="p-6">
                <div class="flex items-start justify-between mb-4">
                    <div>
                        <h3 id="modalTitle" class="text-2xl font-bold text-gray-800 mb-2"></h3>
                        <p id="modalLocation" class="text-gray-600"></p>
                    </div>
                    <div id="modalFeatured" class="hidden">
                        <span class="bg-yellow-500 text-white text-sm px-3 py-1 rounded-full font-medium">
                            Featured
                        </span>
                    </div>
                </div>
                <p id="modalDescription" class="text-gray-700 leading-relaxed"></p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Category Image Carousel
    const carousel = document.getElementById('categoryCarousel');
    if (carousel) {
        const slides = carousel.querySelectorAll('.carousel-slide');
        const indicators = carousel.querySelectorAll('.carousel-indicator');
        const prevBtn = carousel.querySelector('.carousel-prev');
        const nextBtn = carousel.querySelector('.carousel-next');
        let currentSlide = 0;

        function showSlide(index) {
            // Hide all slides
            slides.forEach(slide => {
                slide.classList.remove('active');
                slide.style.opacity = '0';
            });

            // Remove active class from all indicators
            indicators.forEach(indicator => indicator.classList.remove('active'));

            // Show current slide
            if (slides[index]) {
                slides[index].classList.add('active');
                slides[index].style.opacity = '1';
            }

            // Activate current indicator
            if (indicators[index]) {
                indicators[index].classList.add('active');
            }

            currentSlide = index;
        }

        function nextSlide() {
            const next = (currentSlide + 1) % slides.length;
            showSlide(next);
        }

        function prevSlide() {
            const prev = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(prev);
        }

        // Event listeners
        if (nextBtn) nextBtn.addEventListener('click', nextSlide);
        if (prevBtn) prevBtn.addEventListener('click', prevSlide);

        // Indicator navigation
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => showSlide(index));
        });

        // Auto-play
        setInterval(nextSlide, 5000);
    }
});

// Image Modal Functions
function openImageModal(imageUrl, title, description, location, year, isFeatured) {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');
    const modalLocation = document.getElementById('modalLocation');
    const modalFeatured = document.getElementById('modalFeatured');

    modalImage.src = imageUrl;
    modalImage.alt = title;
    modalTitle.textContent = title;
    modalDescription.textContent = description || 'No description available.';

    // Build location string
    let locationText = '';
    if (location && year) {
        locationText = `${location} • ${year}`;
    } else if (location) {
        locationText = location;
    } else if (year) {
        locationText = year;
    }
    modalLocation.textContent = locationText;

    // Show/hide featured badge
    if (isFeatured) {
        modalFeatured.classList.remove('hidden');
    } else {
        modalFeatured.classList.add('hidden');
    }

    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeImageModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.getElementById('imageModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeImageModal();
    }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeImageModal();
    }
});
</script>

<style>
.carousel-indicator.active {
    background-color: white !important;
    transform: scale(1.2);
}

.carousel-slide {
    transition: opacity 0.5s ease-in-out;
}

.carousel-prev:hover,
.carousel-next:hover {
    transform: translateY(-50%) scale(1.1);
}
</style>
{% endblock %}
